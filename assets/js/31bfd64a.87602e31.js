"use strict";(globalThis.webpackChunkuniqueui=globalThis.webpackChunkuniqueui||[]).push([[192],{2561:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"UI Components/UiTreeview","title":"UiTreeview","description":"UiTreeview is a UI node that displays a hierarchical structure of items (child nodes), allowing for selection, drag & drop, and customizable callbacks to manage assets or entities.","source":"@site/docs/UI Components/UiTreeview.md","sourceDirName":"UI Components","slug":"/UI Components/UiTreeview","permalink":"/unique-ui/docs/UI Components/UiTreeview","draft":false,"unlisted":false,"editUrl":"https://github.com/manuel-di-iorio/unique-ui/tree/main/docs/docs/UI Components/UiTreeview.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"documentationSidebar","previous":{"title":"UiScrollbar","permalink":"/unique-ui/docs/UI Components/UiScrollbar"},"next":{"title":"UiContextMenu","permalink":"/unique-ui/docs/UI Components/UiContextMenu"}}');var d=i(4848),t=i(8453);const r={sidebar_position:9},c=void 0,l={},o=[];function h(e){const n={code:"code",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.p,{children:"UiTreeview is a UI node that displays a hierarchical structure of items (child nodes), allowing for selection, drag & drop, and customizable callbacks to manage assets or entities."}),"\n",(0,d.jsx)(n.p,{children:"It's designed for complex asset trees or scene hierarchies, such as in a 3D editor or asset browser."}),"\n",(0,d.jsx)(n.p,{children:"Main Features"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u2705 Single-item selection (selectedItem)"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\ud83e\udde9 Dynamic child container (Items)"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u2699\ufe0f Custom callbacks for events: new asset, remove item, selection, drop, etc."}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\ud83d\udd04 Automatic visual updates when state changes"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\ud83e\udde0 Integrated with the event propagation system"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u26a1 Optimized for performance via surface caching and spatial partitioning"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Constructor"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"new UiTreeview(style = {}, props = {})\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Parameter"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"style"})}),(0,d.jsx)(n.td,{children:"struct"}),(0,d.jsx)(n.td,{children:"Visual and layout styling for the root node."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"props"})}),(0,d.jsx)(n.td,{children:"struct"}),(0,d.jsx)(n.td,{children:"Logical properties and event handlers for the TreeView."})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Properties"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"selectedItem"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"UiTreeviewItem"})}),(0,d.jsx)(n.td,{children:"The currently selected tree item."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Items"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"UiNode"})}),(0,d.jsx)(n.td,{children:"The container node holding all child items."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"onNewAsset"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"function(child)"})}),(0,d.jsx)(n.td,{children:"Called when a new item is created."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"onRemoveItem"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"function(item, wasSelected)"})}),(0,d.jsx)(n.td,{children:"Called when an item is removed; second arg indicates if it was selected."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"onItemSelected"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"function(item, focus)"})}),(0,d.jsx)(n.td,{children:"Triggered when an item is selected. Second arg indicates whether focus should be given."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"onAssetDrop"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"function(dragged, target)"})}),(0,d.jsxs)(n.td,{children:["Handles drag & drop between items. Return ",(0,d.jsx)(n.code,{children:"true"})," to accept the drop."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"onContextMenu"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"function(item)"})}),(0,d.jsx)(n.td,{children:"Optional callback invoked when an item is right-clicked; receives the item."})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Item properties (per node)"})}),"\n",(0,d.jsx)(n.p,{children:"Each individual item node may expose the following fields (set when items are created):"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"name"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"string"})}),(0,d.jsx)(n.td,{children:"Item display name."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"icon"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sprite"})}),(0,d.jsx)(n.td,{children:"Optional icon sprite displayed next to label."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"value"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"any"})}),(0,d.jsx)(n.td,{children:"The item's underlying value."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"collapsed"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"bool"})}),(0,d.jsxs)(n.td,{children:["Whether the item is collapsed (default ",(0,d.jsx)(n.code,{children:"true"})," for folders)."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"entity"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"bool"})}),(0,d.jsx)(n.td,{children:"Flag used to denote entity nodes (affects drag behaviour)."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"asset"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"any"})}),(0,d.jsx)(n.td,{children:"Optional asset reference attached to the item."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"assetType"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"string"})}),(0,d.jsx)(n.td,{children:"A string describing the asset type (used by drop validation)."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"acceptsDropOf"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"array"})}),(0,d.jsx)(n.td,{children:"Optional array of assetType strings that this item accepts when dropped onto it."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"collapseSprite"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sprite"})}),(0,d.jsx)(n.td,{children:"Optional sprite used for the collapsed arrow button."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"expandSprite"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sprite"})}),(0,d.jsx)(n.td,{children:"Optional sprite used for the expanded arrow button."})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:'var tree = new UiTreeview();\ntree.onItemSelected = function(item) {\n    show_debug_message("Selected: " + item.name);\n};\nroot.add(tree);\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Visual Features"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"Hover and selection highlighting"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"Icon + label alignment with dynamic positioning"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"Expand/collapse arrow with sprites:"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"sprUiTreeviewArrowDown / sprUiTreeviewArrowRight"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"Background rendering for non-collapsed entities (global.UI_COL_TREE_BG)"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Structure & Nodes"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"UiTreeview.Items"}),": root container for top-level items."]}),"\n",(0,d.jsxs)(n.li,{children:["Each item is a ",(0,d.jsx)(n.code,{children:"UiTreeviewItem"})," composed of:","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Content"})," (a ",(0,d.jsx)(n.code,{children:"UiNode"})," with ",(0,d.jsx)(n.code,{children:"pointerEvents"})," and ",(0,d.jsx)(n.code,{children:"dropzone"}),"),"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"LeftContent"})," (container for arrow + icon + label),"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Arrow"})," (a ",(0,d.jsx)(n.code,{children:"UiButton"})," used to expand/collapse children),"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Items"})," (a ",(0,d.jsx)(n.code,{children:"UiNode"})," containing child items)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Selection & Interaction"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Clicking an item's content with the left mouse button selects it. Selection is tracked by ",(0,d.jsx)(n.code,{children:"tree.selectedItem"})," and the ",(0,d.jsx)(n.code,{children:"onItemSelected"})," callback is invoked with the selected item."]}),"\n",(0,d.jsxs)(n.li,{children:["Right-clicking an item triggers the tree's ",(0,d.jsx)(n.code,{children:"onContextMenu(item)"})," callback if provided."]}),"\n",(0,d.jsxs)(n.li,{children:["Pressing ",(0,d.jsx)(n.code,{children:"Delete"})," while the tree has focus and an item is selected will call the item's internal ",(0,d.jsx)(n.code,{children:"__removeItem()"})," method which invokes the tree's ",(0,d.jsx)(n.code,{children:"onRemoveItem"})," callback."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Drag & Drop"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Items are draggable (",(0,d.jsx)(n.code,{children:"draggable = true"}),") and each item's ",(0,d.jsx)(n.code,{children:"Content"})," acts as a ",(0,d.jsx)(n.code,{children:"dropzone"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:["The tree supports a per-item ",(0,d.jsx)(n.code,{children:"acceptsDropOf"})," array and an ",(0,d.jsx)(n.code,{children:"assetType"})," string to validate whether a dragged item can be dropped on a target. The built-in ",(0,d.jsx)(n.code,{children:"validateDrop(draggedItem, targetItem)"})," enforces:","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"an item cannot be dropped onto itself,"}),"\n",(0,d.jsxs)(n.li,{children:["items of type ",(0,d.jsx)(n.code,{children:"Texture"})," or ",(0,d.jsx)(n.code,{children:"Material"})," are not movable,"]}),"\n",(0,d.jsxs)(n.li,{children:["if the target defines ",(0,d.jsx)(n.code,{children:"acceptsDropOf"}),", the dragged item's ",(0,d.jsx)(n.code,{children:"assetType"})," must be listed there,"]}),"\n",(0,d.jsxs)(n.li,{children:["folders (",(0,d.jsx)(n.code,{children:'assetType == "Folder"'}),") accept any drop."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Public Item Methods"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Method"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"addChild(childItem, expand = true)"})}),(0,d.jsxs)(n.td,{children:["Add a child ",(0,d.jsx)(n.code,{children:"UiTreeviewItem"})," to this item. Expands the parent by default."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"removeChild(childItem)"})}),(0,d.jsx)(n.td,{children:"Remove a specific child from this item."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"moveItemTo(targetParent, shouldExpand = true, onClearCb = undefined)"})}),(0,d.jsxs)(n.td,{children:["Move this item under ",(0,d.jsx)(n.code,{children:"targetParent"}),". Optionally run ",(0,d.jsx)(n.code,{children:"onClearCb"})," to clear selection/gizmos before move."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"expandItem()"})}),(0,d.jsx)(n.td,{children:"Expand this item to show its children. Updates arrow sprite and visibility."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"collapseItem()"})}),(0,d.jsx)(n.td,{children:"Collapse this item and hide children."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"__removeItem()"})}),(0,d.jsxs)(n.td,{children:["Internal removal function that asks for confirmation, invokes ",(0,d.jsx)(n.code,{children:"onRemoveItem"})," and destroys the node."]})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Callbacks / Events"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"onNewAsset(child)"}),": invoked when a new child item is programmatically added (",(0,d.jsx)(n.code,{children:"__addItem"})," helper)."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"onRemoveItem(item, wasSelected)"}),": invoked when an item is removed; second argument indicates whether the item was selected."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"onItemSelected(item, focus)"}),": invoked when an item is selected; ",(0,d.jsx)(n.code,{children:"focus"})," indicates whether the selection should focus the UI."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"onAssetDrop(dragged, target)"}),": if defined, it is called when an item is dropped on a target; should return ",(0,d.jsx)(n.code,{children:"true"})," to accept the drop."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"onContextMenu(item)"}),": optional; called on right-click to show custom context menus."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Arrow / Expand/Collapse"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Each item exposes ",(0,d.jsx)(n.code,{children:"Arrow"}),", a ",(0,d.jsx)(n.code,{children:"UiButton"})," initially hidden. ",(0,d.jsx)(n.code,{children:"__updateArrowVisibility()"})," shows the arrow when the item has children. The button swaps its sprite between ",(0,d.jsx)(n.code,{children:"collapseSprite"})," and ",(0,d.jsx)(n.code,{children:"expandSprite"})," and toggles collapsed state."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Rendering Notes"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["The item's ",(0,d.jsx)(n.code,{children:"onDraw"})," draws hover highlight (",(0,d.jsx)(n.code,{children:"global.UI_COL_BTN_HOVER"}),"), selected highlight (",(0,d.jsx)(n.code,{children:"global.UI_COL_SELECTED"}),") and item background when expanded (",(0,d.jsx)(n.code,{children:"global.UI_COL_TREE_BG"}),")."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example with drop handler and context menu"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:'var tree = new UiTreeview();\ntree.onAssetDrop = function(draggedItem, targetItem) {\n        // validate/move asset\n        return true; // accept\n};\n\ntree.onContextMenu = function(item) {\n        var menu = new UiContextMenu(device_mouse_x_to_gui(0), device_mouse_y_to_gui(0), [\n                { label: "Rename", onClick: function() { /* ... */ } },\n                { label: "Delete", onClick: function() { item.__removeItem(); } }\n        ]);\n        menu.show();\n};\n'})})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var s=i(6540);const d={},t=s.createContext(d);function r(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);